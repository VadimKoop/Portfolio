'use strict';var woostifySearchDelay=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}(),woostifyAjaxProductSearch=function(){var a=document.querySelectorAll(".search-field");a.length&&"undefined"!=typeof woostify_ajax_product_search_data&&a.forEach(function(a){var b=a.closest("form"),c=!!b&&b.classList.contains("woocommerce-product-search"),d=!!b&&b.querySelector(".search-field");if(b&&c&&d){d.setAttribute("autocomplete","off");var e=b.closest(".site-search")||b.closest(".dialog-search-content"),f=!!e&&e.querySelector(".ajax-search-results");if(f){var g=document.createElement("span");g.setAttribute("class","clear-search-results ti-close"),d.parentNode.insertBefore(g,d.nextSibling),woostify_ajax_product_search_data.select&&(b.insertAdjacentHTML("afterbegin",woostify_ajax_product_search_data.select),b.classList.add("category-filter"));var h=b.querySelector(".ajax-product-search-category-filter"),i=function(){var a=void 0!==arguments[0]&&arguments[0],c=h?h.value.trim():"",e=d.value.trim();if(!e)return g.classList.remove("show"),void f.classList.add("hide");g.classList.add("show"),f.classList.remove("hide"),g.onclick=function(){d.value="",g.classList.remove("show"),f.classList.add("hide")};var i=d.getAttribute("data-value");if(e!==i||a){d.setAttribute("data-value",e),b.classList.add("loading");var j=new Request(woostify_ajax_product_search_data.ajax_url,{method:"POST",body:"action=ajax_product_search&ajax_nonce="+woostify_ajax_product_search_data.ajax_nonce+"&ajax_product_search_keyword="+encodeURIComponent(e)+"&cat_id="+c,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(j).then(function(a){return 200===a.status?void a.json().then(function(a){if(a.success){f.innerHTML=a.data.content;var b=document.querySelector(".dialog-search-title"),c=document.querySelector(".search-dialog-count");!c&&b?b.insertAdjacentHTML("beforeend","<span class=\"search-dialog-count aps-highlight\">"+(0==a.data.size?"":a.data.result)+"</span>"):c.innerHTML=0==a.data.size?"":a.data.result}}):(alert(woostify_ajax_product_search_data.ajax_error),void console.log("Status Code: "+a.status))}).finally(function(){b.classList.remove("loading")})}};d.addEventListener("input",function(){woostifySearchDelay(function(){i()},500)}),h&&h.addEventListener("change",function(){i(!0),d.focus()})}}})};document.addEventListener("DOMContentLoaded",function(){woostifyAjaxProductSearch()});