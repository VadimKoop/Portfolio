'use strict';var woostifyAvailableVariations=function(a,b){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],b=!!(0<arguments.length&&void 0!==arguments[1])&&arguments[1];if(a.length){var c=[];a.forEach(function(b){var a=b.closest(".value"),d=b.querySelectorAll("option");d.length&&d.forEach(function(a){var b=a.getAttribute("value");b&&c.push(b)})});var d=b?b.querySelectorAll(".woostify-variation-swatches .swatch"):[];c.length&&d.length&&d.forEach(function(a){var b=a.getAttribute("data-value");b&&(c.includes(b)?a.classList.remove("unavailable"):a.classList.add("unavailable"))})}},woostifyVariationSwatches=function(){var a=document.querySelectorAll("form.variations_form");if(a.length)for(var b=0,c=a.length;b<c;b++){var d=a[b],e=d.querySelectorAll(".swatch");if(!e.length)return;var f=[],g=new Event("change",{bubbles:!0}),h=new Event("woostify_no_matching_variations");e.forEach(function(a){a.onclick=function(b){if(b.preventDefault(),!a.classList.contains("unavailable")){var c=a.closest(".variations"),e=a.closest(".value"),i=c.querySelectorAll("select"),j=e.querySelector("select"),k=j.getAttribute("data-attribute_name")||j.getAttribute("name"),l=a.getAttribute("data-value"),m=j?j.querySelectorAll("option[value=\""+l+"\"]"):[],n=siblings(a);return m.length?void(-1===f.indexOf(k)&&f.push(k),a.classList.contains("selected")?(j.value="",a.classList.remove("selected"),delete f[f.indexOf(k)]):(a.classList.add("selected"),n.length&&n.forEach(function(a){a.classList.remove("selected")}),j.value=l),j.dispatchEvent(g),woostifyAvailableVariations(i,c)):void d.dispatchEvent(h,a)}}});var j=d.querySelector(".reset_variations");j&&j.addEventListener("click",function(){var a=d.querySelectorAll(".swatch");a.length&&a.forEach(function(a){a.classList.remove("unavailable","selected")}),f=[]}),d.addEventListener("woostify_no_matching_variations",function(){window.alert(wc_add_to_cart_variation_params.i18n_no_matching_variations_text)}),jQuery(document.body).on("found_variation",jQuery(d),function(a){var b=a.target,c=!!b&&b.querySelectorAll("select");c&&woostifyAvailableVariations(c,b)})}},woostifySwatchList=function(){var a=document.querySelectorAll(".swatch-list");a.length&&a.forEach(function(a){var b=a.closest(".product"),c=b.querySelector(".product-loop-image-wrapper"),d=b.querySelector(".product-loop-image"),e=d.getAttribute("data-src"),f=a.querySelectorAll(".swatch");f.length&&f.forEach(function(a){var b=siblings(a),f=a.getAttribute("data-src");a.classList.contains("selected")&&(d.setAttribute("srcset",""),d.src=f),a.onclick=function(){c.classList.add("circle-loading"),d.setAttribute("srcset",""),b.length&&b.forEach(function(a){a.classList.remove("selected")}),a.classList.contains("selected")?(a.classList.remove("selected"),d.src=e):(a.classList.add("selected"),d.src=f);var g=new Image;g.src=f,g.onload=function(){c.classList.remove("circle-loading")}}})})};document.addEventListener("DOMContentLoaded",function(){woostifyVariationSwatches(),woostifySwatchList()});